# 面试基础

## 请你谈谈cookie的弊端

`cookie`虽然在持久保存客户端数据提供了方便，分担了服务器的存储的负担，但还是有很多局限性的

1. 每个特定的域名下最多生成20个`cookie`
  i. IE6或更低的版本最多20个cookie
  ii. IE7和之后的版本最多可以有50个cookie
  iii. Firefox最好50个cookie
  iv. chrome和Safari没有做硬性要求
2. IE和opera会清理近期最少使用的`cookie`，Firfox会随机清理cookie
3. `cookie`的最大存储字节大约为4096字节（4k）
4. IE提供了一种存储可以持久化的用户数据，叫做`userdata`，从IE5.0就开始支持。每个数据最多128K，每个域名下最多1M。这个持久化数据放在缓存中，如果缓存没有清理，那么他会一直存在

优点：极高的扩展性和可用性

1. 通过良好的编程，控制保存在cookie中的session对象的大小
2. 通过加密和安全传输协议（SSL），减少cookie被破解的可能性
3. 只在cookie中存放不敏感的数据，即使被盗也不会有重大损失
4. 控制cookie的生命周期，使之不会永久有效

缺点：

1. 数量和长度的限制，每个domain最多只能有20个cookie，每个cookie的长度不能超过4kb，否则会被截取
2. 安全性问题。如果cookie被人拦截了，他就可以取得所有的session信息。即使加密也于事无补，因为拦截者不需要知道cookie的意义。
3. 有些状态不可能保存在客户端。例如:为了防止重复的提交表单，我们需要在服务器上保存一个计数器。如果我们把这个计数器保存在客户端，那么他起不到任何作用
 
